# üöÄ –ó–ê–ü–£–°–ö RE-RANKING –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°!

## ‚úÖ –í–°–ï –ì–û–¢–û–í–û!

–ü—Ä–æ–±–ª–µ–º–∞ —Å –∏–º–µ–Ω–µ–º –º–æ–¥–µ–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å!

## üìã –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd /Users/vladimir.gromov/Code/AILEARN/aiLearn
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export AILEARN_RAG_RERANKING=true
export AILEARN_RAG_RERANKING_PROVIDER=ollama
export AILEARN_RAG_RERANK_MODEL=qwen2.5
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
./gradlew run
```

### 4. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ

```
/ask What is RAG?
```

## üéØ –ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å

### –í –∫–æ–Ω—Å–æ–ª–∏:

```
üîç –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π...

üìö –ù–∞–π–¥–µ–Ω–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤: 3
  1. [README.md] Cosine: 0.87 ‚Üí LLM: 0.94
  2. [ARCHITECTURE.md] Cosine: 0.82 ‚Üí LLM: 0.89  
  3. [README.md.1] Cosine: 0.78 ‚Üí LLM: 0.85

ü§ñ –û—Ç–≤–µ—Ç:
RAG (Retrieval-Augmented Generation) is...
```

**–í–ê–ñ–ù–û:** –ó–Ω–∞—á–µ–Ω–∏—è Cosine –∏ LLM –¥–æ–ª–∂–Ω—ã **–û–¢–õ–ò–ß–ê–¢–¨–°–Ø**!  
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ re-ranking —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ

### –í –ª–æ–≥–∞—Ö (ailearn.log):

–ù–∞–π–¥–∏—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:
```
INFO  - Re-ranking 20 candidates with Ollama model: qwen2.5
DEBUG - Response status: 200 OK
INFO  - Successfully parsed 3 re-ranking scores from LLM
INFO  - Re-ranking complete, selected top-3 from 20 re-ranked chunks
```

## üîç –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: "Model not found"
```bash
ollama pull qwen2.5
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Connection refused"
–ó–∞–ø—É—Å—Ç–∏—Ç–µ Ollama:
```bash
ollama serve
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∫–æ—Ä—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ (Cosine = LLM)
–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ `ailearn.log` –∏ –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```
ERROR - Failed to re-rank with Ollama
```

–ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ —ç—Ç—É –æ—à–∏–±–∫—É, –∏ —è –ø–æ–º–æ–≥—É –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

## üìù –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: LlmProvider

–ï—Å–ª–∏ Ollama –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ LlmProvider:

```bash
export AILEARN_RAG_RERANKING=true
export AILEARN_RAG_RERANKING_PROVIDER=llm

./gradlew run
```

–≠—Ç–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Perplexity (—Å API costs).

## üéâ –ì–æ—Ç–æ–≤–æ!

–í—Å—ë –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É.  
–ü—Ä–æ—Å—Ç–æ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ!

---

**–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –º–æ–¥–µ–ª–∏ (`qwen2.5:3b` –≤–º–µ—Å—Ç–æ `qwen2.5`)  
**–ü—Ä–æ–±–ª–µ–º–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞**: ‚úÖ  
**–ö–æ–º–ø–∏–ª—è—Ü–∏—è**: ‚úÖ –£—Å–ø–µ—à–Ω–∞  
**–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É**: ‚úÖ –î–ê!

